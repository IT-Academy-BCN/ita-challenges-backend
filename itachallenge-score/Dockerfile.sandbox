FROM bellsoft/liberica-openjdk-alpine:17.0.1

# Copy the custom JDK from the root of the score directory
COPY /score/custom-jdk /opt/custom-jdk

# Set JAVA_HOME to the custom JDK
ENV JAVA_HOME=/opt/custom-jdk
ENV PATH=$JAVA_HOME/bin:$PATH

# Copy the script to remove specific classes
COPY remove_classes.sh /opt/remove_classes.sh

# Run the script to remove specific classes
RUN chmod +x /opt/remove_classes.sh && /opt/remove_classes.sh

# Verify the custom JDK
RUN java -version